namespace = lds_migration

#WIP - change out the islam images and noises with more appropriate images and sound

lds_migration.1 = { #Smiths assassinated, mormons prepare to leave
	type = country_event
	placement = scope:lds_assassination_scope
	title = lds_migration.1.t
	desc = lds_migration.1.d
	flavor = lds_migration.1.f

	event_image = {
		video = "gfx/event_pictures/middleeast_islam.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/islam"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	duration = 3

	immediate = {
		if = {
			limit = {
				has_variable = lds_nauvoo
			}
			random_scope_state = {
				limit = {
					state_region = {
						has_variable = nauvoo_site
					}
				}
				save_scope_as = lds_assassination_scope
				state_region = {
					remove_homeland = mormon
				}
			}
		}
		else_if = {
			limit = {
				has_variable = lds_kirtland
			}
			s:STATE_OHIO = {
				region_state:USA = {
					save_scope_as = lds_assassination_scope
				}
				remove_homeland = mormon
			}
		}
		else_if = {
			s:STATE_MISSOURI.region_state:USA = {
				save_scope_as = lds_assassination_scope
			}
		}
		s:STATE_MISSOURI = {
			remove_homeland = mormon
		}
		random_scope_character = {
			limit = {
				has_variable = is_joseph_smith
			}
			kill_character = yes
		}
	}
	
	option = {
		name = lds_migration.1.a
		
		hidden_effect = {
			trigger_event = { 
				id = lds_migration.4 days = 120
			}
		}
	}
}

lds_migration.2 = { #journal invalidated, most likely by Smith being in the wrong country. 
	type = country_event
	placement = root
	title = lds_migration.2.t
	desc = lds_migration.2.d
	flavor = lds_migration.2.f

	event_image = {
		video = "gfx/event_pictures/middleeast_islam.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/islam"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	duration = 3

	option = {
		name = lds_migration.2.a
		hidden_effect = {
			random_scope_character = {
				limit = {
					has_variable = is_joseph_smith
				}
				place_character_in_void = 6
			}
			set_global_variable = lds_stay_put
		}
	}
}

lds_migration.3 = { #Stability maintained, Missouri and Nauvoo remain mormon homeland
	type = country_event
	placement = root
	title = lds_migration.3.t
	desc = lds_migration.3.d

	event_image = {
		video = "gfx/event_pictures/middleeast_islam.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/islam"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	duration = 3

	immediate = {
		random_scope_state = {
			limit = {
				is_homeland = cu:mormon
			}
			save_scope_as = mormon_homeland_state
		}
	}

	option = {
		name = lds_migration.3.a
		if = {
			limit = {
				cu:mormon = {
					NOT = { has_homeland = s:STATE_MISSOURI }
				}
			}
			s:STATE_MISSOURI = {
				add_homeland = mormon
			}
		}
		hidden_effect = {
			set_global_variable = lds_stay_put
		}
	}
}

lds_migration.4 = { #Founding of Deseret, Young Edition
	type = country_event
	placement = root
	title = lds_migration.4.t
	desc = lds_migration.4.d
	flavor = lds_migration.4.f

	event_image = {
		video = "gfx/event_pictures/middleeast_islam.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/islam"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	duration = 3

	immediate = {
		set_global_variable = lds_migrated
		s:STATE_CALIFORNIA = { add_to_list = deseret_potential }
		s:STATE_OREGON = { add_to_list = deseret_potential }
		s:STATE_WASHINGTON = { add_to_list = deseret_potential }
		s:STATE_BRITISH_COLUMBIA = { add_to_list = deseret_potential }
		s:STATE_NEVADA = { add_to_list = deseret_potential }
		s:STATE_IDAHO = { add_to_list = deseret_potential }
		s:STATE_MONTANA = { add_to_list = deseret_potential }
		s:STATE_ALBERTA = { add_to_list = deseret_potential }
		s:STATE_SASKATCHEWAN = { add_to_list = deseret_potential }
		s:STATE_ARIZONA = { add_to_list = deseret_potential }
		s:STATE_UTAH = { add_to_list = deseret_potential }
		s:STATE_NEW_MEXICO = { add_to_list = deseret_potential }
		s:STATE_COLORADO = { add_to_list = deseret_potential }
		s:STATE_WYOMING = { add_to_list = deseret_potential }
		s:STATE_WYOMING = { add_to_list = deseret_potential }
		s:STATE_SOUTH_DAKOTA = { add_to_list = deseret_potential }
		s:STATE_NORTH_DAKOTA = { add_to_list = deseret_potential }
		s:STATE_KANSAS = { add_to_list = deseret_potential }
		s:STATE_NEBRASKA= { add_to_list = deseret_potential }
		random_in_list = {
			list = deseret_potential
			weight = {
				base = 0
				
				modifier = {
					any_scope_state = {
						owner = {
							is_country_type = decentralized
						}
					}
					add = 40
					desc = "decentralized_state"
				}
				
				modifier = {
					NOT = {
						any_scope_state = {
							owner = {
								is_country_type = unrecognized
							}
						}
					}
					add = 10
					desc = "unrecognized_state"
				}
				
				modifier = {
					any_scope_state = {
						is_incorporated = no
					}
					add = -20
					desc = "unincorporated_state"
				}
				
				modifier = {
					any_scope_state = {
						is_incorporated = yes
					}
					add = -50
					desc = "incorporated_state"
				}
				
				modifier = {
					any_scope_state = {
						OR = {
							AND = {
								exists = c:USA
								owner = c:USA
							}
							AND = {
								exists = c:CSA
								owner = c:CSA
							}
							AND = {
								exists = c:FSA
								owner = c:FSA
							}
							AND = {
								exists = c:NEN
								owner = c:NEN
							}
							AND = {
								exists = c:UOM
								owner = c:UOM
							}
						}
					}
					add = -20
					desc = "usonian_aversion"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 1
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 2
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 3
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 4
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 5
					}
					add = -10
					desc = "already_settled"
				}
			}
			set_variable = deseret_capital
		}
		every_state_region = {
			limit = {
				has_variable = deseret_capital
			}
			if = {
				limit = {
					any_scope_state = {
						owner = {
							OR = {
								is_country_type = colonial
								is_country_type = recognized
							}
						}
					}
				}
				random_scope_state = {
					limit = {
						owner = {
							OR = {
								is_country_type = colonial
								is_country_type = recognized
							}
						}
					}
					save_scope_as = deseret_state
				}
			}
			else_if = {
				limit = {
					any_scope_state = {
						owner = {
							is_country_type = unrecognized
						}
					}
				}
				random_scope_state = {
					limit = {
						owner = {
							is_country_type = unrecognized
						}
					}
					save_scope_as = deseret_state
				}
			}
			else_if = { #this just makes it look nicer if they pick one of those states
				limit = {
					any_scope_state = {
						owner = c:SHO
					}
				}
				random_scope_state = {
					limit = {
						owner = c:SHO
					}
					save_scope_as = deseret_state
				}
			}
			else = {
				random_scope_state = {
					save_scope_as = deseret_state
				}
			}
		}
		create_country = {
			origin = ROOT
			tag = DES
			state = scope:deseret_state
			on_created = {
				if = {
					limit = {
						any_country = {
							has_claim = c:DES.capital
						}
					}
					random_country = {
						limit = {
							has_claim = c:DES.capital
						}
						create_diplomatic_pact = {
							country = c:DES
							type = puppet
						}
					}
				}

				random_list = {
					40 = {
						modifier = {
							if = {
								limit = {
									has_variable = lds_slaves_embraced
								}
							}
							add = -10
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_vigilantes_justified
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									OR = {
										has_variable = danites_embraced
										has_variable = danites_rebuffed
									}
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_theocracy_embraced
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_polygamy_rejected
								}
							}
							add = -15
						}
						create_character = {
							first_name = "Brigham"
							last_name = "Young"
							noble = yes
							ruler = yes
							ig_leader = yes
							birth_date = 1801.6.1
							dna = ecchi_usa_brigham_young
							ideology = ideology_slaver
							interest_group = ig_devout
							traits = {
								bigoted
								romantic
								demagogue
								experienced_colonial_administrator
							}
						}
					}
					40 = {
						modifier = {
							if = {
								limit = {
									has_variable = lds_slaves_embraced
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_vigilantes_justified
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									OR = {
										has_variable = danites_embraced
										has_variable = danites_accepted
									}
								}
							}
							add = -10
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_republic_embraced
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_polygamy_condoned
								}
							}
							add = -15
						}
						create_character = {
							first_name = "Emma"
							last_name = "Smith"
							noble = yes
							ruler = yes
							female = yes
							birth_date = 1804.7.10
							#dna = 
							ideology = ideology_theocrat
							interest_group = ig_devout
							traits = {
								cautious
								basic_diplomat
							}
						}
						create_character = {
							first_name = "Joseph"
							last_name = "Smith"
							noble = yes
							ig_leader = yes
							birth_date = 1832.11.6
							ideology = ideology_reformer
							interest_group = ig_devout
							traits = {
								tactful
							}
						}
					}
					40 = {
						modifier = {
							if = {
								limit = {
									has_variable = lds_slaves_avoided
								}
							}
							add = -10
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_vigilantes_unwise
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									OR = {
										has_variable = danites_embraced
										has_variable = danites_rebuffed
									}
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_republic_embraced
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_polygamy_rejected
								}
							}
							add = -15
						}
						create_character = {
							first_name = "James"
							last_name = "Strang"
							noble = yes
							ruler = yes
							ig_leader = yes
							birth_date = 1813.3.21
							#dna = 
							ideology = ideology_royalist
							interest_group = ig_devout
							traits = {
								ambitious
								basic_political_operator
							}
						}
					}
					40 = {
						modifier = {
							if = {
								limit = {
									has_variable = lds_slaves_avoided
								}
							}
							add = -10
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_vigilantes_unwise
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									OR = {
										has_variable = danites_rebuffed
										has_variable = danites_accepted
									}
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_theocracy_embraced
								}
							}
							add = -5
						}
						modifier = {
							if = {
								limit = {
									has_variable = lds_polygamy_condoned
								}
							}
							add = -15
						}
						create_character = {
							first_name = "Sidney"
							last_name = "Rigdon"
							noble = yes
							ruler = yes
							ig_leader = yes
							birth_date = 1793.2.19
							#dna = 
							ideology = ideology_moderate
							interest_group = ig_devout
							traits = {
								experienced_political_operator
								firebrand
								reckless
							}
						}
					}
				}
				if = {
					limit = {
						NOT = {
							has_global_variable = rockwell_imprisoned
						}
					}
					create_character = {
						first_name = "Porter"
						last_name = "Rockwell"
						ig_leader = yes
						birth_date = 1813.6.28
						dna = dna_porter_rockwell
						ideology = ideology_traditionalist
						interest_group = ig_petty_bourgeoisie
						traits = {
							alcoholic
							reckless
							brave
						}
					}
				}
				create_character = {
					first_name = "Daniel_H"
					last_name = "Wells"
					ig_leader = yes
					is_general = yes
					birth_date = 1814.10.27
					dna = dna_daniel_h_wells
					ideology = ideology_anti_censorship
					interest_group = ig_armed_forces
					traits = {
						persistent
						stalwart_defender
					}
				}
				ig:ig_devout = {
					set_interest_group_name = ig_lds_church
					remove_ideology = ideology_moralist
					remove_ideology = ideology_patriarchal
					add_ideology = ideology_theodemocratic
					add_ideology = ideology_agrarian
				}
				ig:ig_rural_folk = {
					remove_ideology = ideology_agrarian
					add_ideology = ideology_yeomanism
				}
				ig:ig_petty_bourgeoisie = {
					remove_ideology = ideology_reactionary
					add_ideology = ideology_nativist
				}
				ig:ig_industrialists = {
					remove_ideology = ideology_laissez_faire
					add_ideology = ideology_laissez_faire_secular
				}
				ig:ig_landowners = {
					remove_ideology = ideology_paternalistic
					add_ideology = ideology_republican_paternalistic
				}
				activate_law = law_type:law_no_schools
				activate_law = law_type:law_no_health_system
				activate_law = law_type:law_freedom_of_conscience
			}
		}
		every_scope_pop = {
			limit = {
				has_pop_religion = lds
				has_pop_culture = mormon
			}
			move_pop = c:DES.capital
		}
		scope:deseret_state = {
			state_region = {
				add_claim = c:DES
				add_homeland = mormon
			}
		}
		c:DES = {
			ruler = {
				save_scope_as = deseret_leader
			}
		}
	}
	
	option = {
		name = lds_migration.4.a
		default_option = yes
	}
	
	option = {
		name = lds_migration.4.b
		play_as = c:DES
	}
}

lds_migration.5 = { #Founding of Deseret, Hyrum Edition
	type = country_event
	placement = root
	title = lds_migration.5.t
	desc = lds_migration.5.d
	flavor = lds_migration.5.f

	event_image = {
		video = "gfx/event_pictures/middleeast_islam.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/islam"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	duration = 3

	trigger = {
		has_global_variable = lds_csa
		NOT = {
			exists = c:ZIO
		}
	}

	immediate = {
		set_global_variable = lds_migrated
		s:STATE_CALIFORNIA = { add_to_list = deseret_potential }
		s:STATE_OREGON = { add_to_list = deseret_potential }
		s:STATE_WASHINGTON = { add_to_list = deseret_potential }
		s:STATE_BRITISH_COLUMBIA = { add_to_list = deseret_potential }
		s:STATE_NEVADA = { add_to_list = deseret_potential }
		s:STATE_IDAHO = { add_to_list = deseret_potential }
		s:STATE_MONTANA = { add_to_list = deseret_potential }
		s:STATE_ALBERTA = { add_to_list = deseret_potential }
		s:STATE_SASKATCHEWAN = { add_to_list = deseret_potential }
		s:STATE_ARIZONA = { add_to_list = deseret_potential }
		s:STATE_UTAH = { add_to_list = deseret_potential }
		s:STATE_NEW_MEXICO = { add_to_list = deseret_potential }
		s:STATE_COLORADO = { add_to_list = deseret_potential }
		s:STATE_WYOMING = { add_to_list = deseret_potential }
		s:STATE_WYOMING = { add_to_list = deseret_potential }
		s:STATE_SOUTH_DAKOTA = { add_to_list = deseret_potential }
		s:STATE_NORTH_DAKOTA = { add_to_list = deseret_potential }
		s:STATE_KANSAS = { add_to_list = deseret_potential }
		s:STATE_NEBRASKA= { add_to_list = deseret_potential }
		random_in_list = {
			list = deseret_potential
			weight = {
				base = 0
				
				modifier = {
					any_scope_state = {
						owner = {
							is_country_type = decentralized
						}
					}
					add = 40
					desc = "decentralized_state"
				}
				
				modifier = {
					NOT = {
						any_scope_state = {
							owner = {
								is_country_type = unrecognized
							}
						}
					}
					add = 10
					desc = "unrecognized_state"
				}
				
				modifier = {
					any_scope_state = {
						is_incorporated = no
					}
					add = -20
					desc = "unincorporated_state"
				}
				
				modifier = {
					any_scope_state = {
						is_incorporated = yes
					}
					add = -50
					desc = "incorporated_state"
				}
				
				modifier = {
					any_scope_state = {
						OR = {
							AND = {
								exists = c:USA
								owner = c:USA
							}
							AND = {
								exists = c:CSA
								owner = c:CSA
							}
							AND = {
								exists = c:FSA
								owner = c:FSA
							}
							AND = {
								exists = c:NEN
								owner = c:NEN
							}
							AND = {
								exists = c:UOM
								owner = c:UOM
							}
						}
					}
					add = -20
					desc = "usonian_aversion"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 1
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 2
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 3
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 4
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 5
					}
					add = -10
					desc = "already_settled"
				}
			}
			set_variable = deseret_capital
		}
		every_state_region = {
			limit = {
				has_variable = deseret_capital
			}
			if = {
				limit = {
					any_scope_state = {
						owner = {
							OR = {
								is_country_type = colonial
								is_country_type = recognized
							}
						}
					}
				}
				random_scope_state = {
					limit = {
						owner = {
							OR = {
								is_country_type = colonial
								is_country_type = recognized
							}
						}
					}
					save_scope_as = deseret_state
				}
			}
			else_if = {
				limit = {
					any_scope_state = {
						owner = {
							is_country_type = unrecognized
						}
					}
				}
				random_scope_state = {
					limit = {
						owner = {
							is_country_type = unrecognized
						}
					}
					save_scope_as = deseret_state
				}
			}
			else_if = { #this just makes it look nicer if they pick one of those states
				limit = {
					any_scope_state = {
						owner = c:SHO
					}
				}
				random_scope_state = {
					limit = {
						owner = c:SHO
					}
					save_scope_as = deseret_state
				}
			}
			else = {
				random_scope_state = {
					save_scope_as = deseret_state
				}
			}
		}
		create_country = {
			origin = ROOT
			tag = DES
			state = scope:deseret_state
			on_created = {
				if = {
					limit = {
						any_country = {
							has_claim = c:DES.capital
						}
					}
					random_country = {
						limit = {
							has_claim = c:DES.capital
						}
						create_diplomatic_pact = {
							country = c:DES
							type = puppet
						}
					}
				}
				create_character = {
					first_name = "Hyrum"
					last_name = "Smith"
					noble = yes
					ruler = yes
					ig_leader = yes
					birth_date = 1800.2.9
					dna = dna_hyrum_smith 
					interest_group = ig_devout
					traits = {
						reserved
						pious
						wounded
					}
				}
				if = {
					limit = {
						NOT = {
							has_global_variable = rockwell_imprisoned
						}
					}
					create_character = {
						first_name = "Porter"
						last_name = "Rockwell"
						ig_leader = yes
						birth_date = 1813.6.28
						dna = dna_porter_rockwell
						ideology = ideology_traditionalist
						interest_group = ig_petty_bourgeoisie
						traits = {
							alcoholic
							reckless
							brave
						}
					}
				}
				if = {
					limit = {
						has_global_variable = danites_formed
					}
					create_character = {
						first_name = "Sampson"
						last_name = "Avard"
						ig_leader = yes
						is_general = yes
						birth_date = 1800.10.23
						ideology = ideology_jingoist_leader
						interest_group = ig_armed_forces
						traits = {
							wrathful
						}
					}
				}
				ig:ig_devout = {
					set_interest_group_name = ig_lds_church
					remove_ideology = ideology_moralist
					remove_ideology = ideology_patriarchal
					add_ideology = ideology_theodemocratic
					add_ideology = ideology_agrarian
				}
				ig:ig_rural_folk = {
					remove_ideology = ideology_agrarian
					add_ideology = ideology_yeomanism
				}
				ig:ig_petty_bourgeoisie = {
					remove_ideology = ideology_reactionary
					add_ideology = ideology_nativist
				}
				ig:ig_industrialists = {
					remove_ideology = ideology_laissez_faire
					add_ideology = ideology_laissez_faire_secular
				}
				ig:ig_landowners = {
					remove_ideology = ideology_paternalistic
					add_ideology = ideology_republican_paternalistic
				}
				activate_law = law_type:law_no_schools
				activate_law = law_type:law_no_health_system
				activate_law = law_type:law_freedom_of_conscience
			}
		}
		every_scope_pop = {
			limit = {
				has_pop_religion = lds
				has_pop_culture = mormon
			}
			move_pop = c:DES.capital
		}
		scope:deseret_state = {
			state_region = {
				add_claim = c:DES
				add_homeland = mormon
			}
		}
		c:DES = {
			ruler = {
				save_scope_as = deseret_leader
			}
		}
	}
	
	option = {
		name = lds_migration.5.a
		default_option = yes
	}
	
	option = {
		name = lds_migration.5.b
		play_as = c:DES
	}
}

lds_migration.6 = { #Founding of Deseret, Joseph Edition
	type = country_event
	placement = root
	title = lds_migration.6.t
	desc = lds_migration.6.d
	flavor = lds_migration.6.f

	event_image = {
		video = "gfx/event_pictures/middleeast_islam.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/islam"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	duration = 3

	immediate = {
		set_global_variable = lds_migrated
		if = {
			limit = {
				any_scope_character = {
					has_variable = is_joseph_smith
				}
			}
			random_scope_character = {
				limit = {
					has_variable = is_joseph_smith
				}
				save_scope_as = joseph_smith_scope
			}
		}
		s:STATE_CALIFORNIA = { add_to_list = deseret_potential }
		s:STATE_OREGON = { add_to_list = deseret_potential }
		s:STATE_WASHINGTON = { add_to_list = deseret_potential }
		s:STATE_BRITISH_COLUMBIA = { add_to_list = deseret_potential }
		s:STATE_NEVADA = { add_to_list = deseret_potential }
		s:STATE_IDAHO = { add_to_list = deseret_potential }
		s:STATE_MONTANA = { add_to_list = deseret_potential }
		s:STATE_ALBERTA = { add_to_list = deseret_potential }
		s:STATE_SASKATCHEWAN = { add_to_list = deseret_potential }
		s:STATE_ARIZONA = { add_to_list = deseret_potential }
		s:STATE_UTAH = { add_to_list = deseret_potential }
		s:STATE_NEW_MEXICO = { add_to_list = deseret_potential }
		s:STATE_COLORADO = { add_to_list = deseret_potential }
		s:STATE_WYOMING = { add_to_list = deseret_potential }
		s:STATE_WYOMING = { add_to_list = deseret_potential }
		s:STATE_SOUTH_DAKOTA = { add_to_list = deseret_potential }
		s:STATE_NORTH_DAKOTA = { add_to_list = deseret_potential }
		s:STATE_KANSAS = { add_to_list = deseret_potential }
		s:STATE_NEBRASKA= { add_to_list = deseret_potential }
		random_in_list = {
			list = deseret_potential
			weight = {
				base = 0
				
				modifier = {
					any_scope_state = {
						owner = {
							is_country_type = decentralized
						}
					}
					add = 40
					desc = "decentralized_state"
				}
				
				modifier = {
					NOT = {
						any_scope_state = {
							owner = {
								is_country_type = unrecognized
							}
						}
					}
					add = 10
					desc = "unrecognized_state"
				}
				
				modifier = {
					any_scope_state = {
						is_incorporated = no
					}
					add = -20
					desc = "unincorporated_state"
				}
				
				modifier = {
					any_scope_state = {
						is_incorporated = yes
					}
					add = -50
					desc = "incorporated_state"
				}
				
				modifier = {
					any_scope_state = {
						OR = {
							AND = {
								exists = c:USA
								owner = c:USA
							}
							AND = {
								exists = c:CSA
								owner = c:CSA
							}
							AND = {
								exists = c:FSA
								owner = c:FSA
							}
							AND = {
								exists = c:NEN
								owner = c:NEN
							}
							AND = {
								exists = c:UOM
								owner = c:UOM
							}
						}
					}
					add = -20
					desc = "usonian_aversion"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 1
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 2
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 3
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 4
					}
					add = -10
					desc = "already_settled"
				}
				
				modifier = {
					any_scope_state = {
						total_urbanization >= 5
					}
					add = -10
					desc = "already_settled"
				}
			}
			set_variable = deseret_capital
		}
		every_state_region = {
			limit = {
				has_variable = deseret_capital
			}
			if = {
				limit = {
					any_scope_state = {
						owner = {
							OR = {
								is_country_type = colonial
								is_country_type = recognized
							}
						}
					}
				}
				random_scope_state = {
					limit = {
						owner = {
							OR = {
								is_country_type = colonial
								is_country_type = recognized
							}
						}
					}
					save_scope_as = deseret_state
				}
			}
			else_if = {
				limit = {
					any_scope_state = {
						owner = {
							is_country_type = unrecognized
						}
					}
				}
				random_scope_state = {
					limit = {
						owner = {
							is_country_type = unrecognized
						}
					}
					save_scope_as = deseret_state
				}
			}
			else_if = { #this just makes it look nicer if they pick one of those states
				limit = {
					any_scope_state = {
						owner = c:SHO
					}
				}
				random_scope_state = {
					limit = {
						owner = c:SHO
						NOT = { state_region = s:STATE_MONTANA }
					}
					save_scope_as = deseret_state
				}
			}
			else = {
				random_scope_state = {
					save_scope_as = deseret_state
				}
			}
		}
		create_country = {
			origin = ROOT
			tag = DES
			state = scope:deseret_state
			on_created = {
				if = {
					limit = {
						any_country = {
							has_claim = c:DES.capital
						}
					}
					random_country = {
						limit = {
							has_claim = c:DES.capital
						}
						create_diplomatic_pact = {
							country = c:DES
							type = puppet
						}
					}
				}
				if = {
					limit = {
						exists = scope:joseph_smith_scope
					}
					scope:joseph_smith_scope = {
						transfer_character = c:DES
						remove_trait = arrogant
						add_trait = charismatic
						set_as_interest_group_leader = yes
					}
					create_character = {
						first_name = "Hyrum"
						last_name = "Smith"
						noble = yes
						ig_leader = yes
						birth_date = 1800.2.9
						dna = dna_hyrum_smith 
						interest_group = ig_devout
						traits = {
							reserved
							pious
						}
					}
				}
				else = {
					create_character = {
						first_name = "Joseph"
						last_name = "Smith"
						ig_leader = yes
						noble = yes
						ruler = yes
						interest_group = ig_devout
						birth_date = 1805.12.23
						dna = ecchi_usa_joseph_smith
						ideology = ideology_republican_leader
						traits = {
							imperious
							charismatic
							basic_political_operator
						}
						on_created = {
							set_variable = {
								name = is_joseph_smith
							}				
						}
					}
				}
				if = {
					limit = {
						NOT = {
							has_global_variable = rockwell_imprisoned
						}
					}
					create_character = {
						first_name = "Porter"
						last_name = "Rockwell"
						ig_leader = yes
						birth_date = 1813.6.28
						dna = dna_porter_rockwell
						ideology = ideology_traditionalist
						interest_group = ig_petty_bourgeoisie
						traits = {
							alcoholic
							reckless
							brave
						}
					}
				}
				if = {
					limit = {
						has_global_variable = danites_formed
					}
					create_character = {
						first_name = "Sampson"
						last_name = "Avard"
						ig_leader = yes
						is_general = yes
						birth_date = 1800.10.23
						ideology = ideology_jingoist_leader
						interest_group = ig_armed_forces
						traits = {
							wrathful
						}
					}
				}
				ig:ig_devout = {
					set_interest_group_name = ig_lds_church
					remove_ideology = ideology_moralist
					remove_ideology = ideology_patriarchal
					add_ideology = ideology_theodemocratic
					add_ideology = ideology_agrarian
				}
				ig:ig_rural_folk = {
					remove_ideology = ideology_agrarian
					add_ideology = ideology_yeomanism
				}
				ig:ig_petty_bourgeoisie = {
					remove_ideology = ideology_reactionary
					add_ideology = ideology_nativist
				}
				ig:ig_industrialists = {
					remove_ideology = ideology_laissez_faire
					add_ideology = ideology_laissez_faire_secular
				}
				ig:ig_landowners = {
					remove_ideology = ideology_paternalistic
					add_ideology = ideology_republican_paternalistic
				}
				activate_law = law_type:law_no_schools
				activate_law = law_type:law_no_health_system
				activate_law = law_type:law_freedom_of_conscience
				if = {
					limit = {
						OR = {
							has_law = law_type:law_monarchy
							has_law = law_type:law_theocracy
							has_law = law_type:law_council_republic
						}
					}
					activate_law = law_type:law_presidential_republic
				}
				if = {
					limit = {
						OR = {
							has_law = law_type:law_ethnostate
						}
					}
					activate_law = law_type:law_racial_segregation
				}
			}
		}
		every_scope_pop = {
			limit = {
				has_pop_religion = lds
				has_pop_culture = mormon
			}
			move_pop = c:DES.capital
		}
		scope:deseret_state = {
			state_region = {
				add_claim = c:DES
				add_homeland = mormon
			}
		}
		c:DES = {
			ruler = {
				save_scope_as = deseret_leader
			}
		}
	}
	
	option = {
		name = lds_migration.6.a
		default_option = yes
	}
	
	option = {
		trigger = { is_player = yes }
		name = lds_migration.6.b
		play_as = c:DES
	}
}

lds_migration.7 = { #CSA Zion revolt
	type = country_event
	placement = scope:lds_rebel_state
	title = lds_migration.7.t
	desc = lds_migration.7.d
	flavor = lds_migration.7.f

	event_image = {
		video = "gfx/event_pictures/middleeast_islam.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/islam"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	duration = 3

	trigger = {
		exists = c:CSA
		this = c:CSA
		c:CSA = {
			any_scope_state = {
				state_region = {
					OR = {
						has_variable = far_west
						has_variable = nauvoo_site
					}
				}
			}
		}
	}
	
	immediate = {
		random_scope_state = {
			limit = {
				OR = {
					state_region = {
						has_variable = far_west
						has_variable = nauvoo_site
					}
				}
			}
			save_scope_as = lds_rebel_state
		}
		every_character_in_void = {
			limit = {
				has_variable = is_joseph_smith
			}
			save_scope_as = joe_smith
		}
		if = {
			limit = {
				s:STATE_MISSOURI = {
					has_variable = far_west
				}
			}
			create_country = {
				tag = ZIO
				origin = c:USA
				province = p:x7B0051
				province = p:x701948
				province = p:xF5005E
				province = p:x84487E
				province = p:xBF3FF3
				province = p:x4D6DEF
				province = p:x0AC4E5
				province = p:x8ADB9A
				on_created = {
					#WIP, provide appropriate modifications to IGs and add/move characters here
					if = {
						limit = {
							exists = scope:joe_smith
						}
						scope:joe_smith = {
							transfer_character = c:ZIO
							free_character_from_void = yes
							add_character_role = ruler
							remove_trait = arrogant
							add_trait = charismatic
						}
					}
					else_if = {
						limit = {}
						create_character = {
							first_name = Joseph
							last_name = Smith
							culture = mormon
							religion = lds
							ruler = yes
							ig_leader = yes
							interest_group = ig_devout
							birth_date = 1805.12.23
							dna = ecchi_usa_joseph_smith
							ideology = ideology_reformer
							traits = {
								imperious
								charismatic
								basic_political_operator
							}
							on_created = {
								set_variable = {
									name = is_joseph_smith
								}				
							}
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				s:STATE_ILLINOIS = {
					has_variable = nauvoo_site
				}
			}
			create_country = {
				tag = ZIO
				origin = c:USA
				province = p:xB90E0D
				province = p:x6B3BE8
				province = p:xCD3BFC
				province = p:x746E6F
				province = p:x977A71
				province = p:x33B258
				province = p:x9EA280
				province = p:x3FEEB5
				on_created = {
					#WIP, provide appropriate modifications to IGs and add/move characters here
					if = {
						limit = {
							exists = scope:joe_smith
						}
						scope:joe_smith = {
							transfer_character = c:ZIO
							free_character_from_void = yes
							add_character_role = ruler
							remove_trait = arrogant
							add_trait = charismatic
						}
					}
					else_if = {
						limit = {}
						create_character = {
							first_name = Joseph
							last_name = Smith
							culture = mormon
							religion = lds
							ruler = yes
							ig_leader = yes
							interest_group = ig_devout
							birth_date = 1805.12.23
							dna = ecchi_usa_joseph_smith
							ideology = ideology_reformer
							traits = {
								imperious
								charismatic
								basic_political_operator
							}
							on_created = {
								set_variable = {
									name = is_joseph_smith
								}				
							}
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				s:STATE_IOWA = {
					has_variable = nauvoo_site
				}
			}
			create_country = {
				tag = ZIO
				origin = c:USA
				province = p:x002D4B
				province = p:x71153F
				province = p:x5832CE
				province = p:xC6264B
				province = p:x9A3850
				province = p:xAB3179
				province = p:x606DBE
				province = p:x5BA80C
				province = p:x91CECE
				on_created = {
					#WIP, provide appropriate modifications to IGs and add/move characters here
					if = {
						limit = {
							exists = scope:joe_smith
						}
						scope:joe_smith = {
							transfer_character = c:ZIO
							free_character_from_void = yes
							add_character_role = ruler
							remove_trait = arrogant
							add_trait = charismatic
						}
					}
					else_if = {
						limit = {}
						create_character = {
							first_name = Joseph
							last_name = Smith
							culture = mormon
							religion = lds
							ruler = yes
							ig_leader = yes
							interest_group = ig_devout
							birth_date = 1805.12.23
							dna = ecchi_usa_joseph_smith
							ideology = ideology_reformer
							traits = {
								imperious
								charismatic
								basic_political_operator
							}
							on_created = {
								set_variable = {
									name = is_joseph_smith
								}				
							}
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				s:STATE_KANSAS = {
					has_variable = nauvoo_site
				}
			}
			create_country = {
				tag = ZIO
				origin = c:USA
				province = p:x1B1E8B
				province = p:x2D821B
				province = p:x6C6CF4
				province = p:xCF5B71
				province = p:xE5842F
				province = p:x24CC25
				on_created = {
					#WIP, provide appropriate modifications to IGs and add/move characters here
					if = {
						limit = {
							exists = scope:joe_smith
						}
						scope:joe_smith = {
							transfer_character = c:ZIO
							free_character_from_void = yes
							add_character_role = ruler
							remove_trait = arrogant
							add_trait = charismatic
						}
					}
					else_if = {
						limit = {}
						create_character = {
							first_name = Joseph
							last_name = Smith
							culture = mormon
							religion = lds
							ruler = yes
							ig_leader = yes
							interest_group = ig_devout
							birth_date = 1805.12.23
							dna = ecchi_usa_joseph_smith
							ideology = ideology_reformer
							traits = {
								imperious
								charismatic
								basic_political_operator
							}
							on_created = {
								set_variable = {
									name = is_joseph_smith
								}				
							}
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				s:STATE_NEBRASKA = {
					has_variable = nauvoo_site
				}
			}
			create_country = {
				tag = ZIO
				origin = c:USA
				province = p:x394431
				province = p:x924593
				province = p:x3E62DB
				province = p:x9B4CC5
				province = p:x6298F3
				province = p:xD5A04C
				province = p:x90C040
				province = p:x5BD057
				province = p:x76F2C5
				on_created = {
					#WIP, provide appropriate modifications to IGs and add/move characters here
					if = {
						limit = {
							exists = scope:joe_smith
						}
						scope:joe_smith = {
							transfer_character = c:ZIO
							free_character_from_void = yes
							add_character_role = ruler
							remove_trait = arrogant
							add_trait = charismatic
						}
					}
					else_if = {
						limit = {}
						create_character = {
							first_name = Joseph
							last_name = Smith
							culture = mormon
							religion = lds
							ruler = yes
							ig_leader = yes
							interest_group = ig_devout
							birth_date = 1805.12.23
							dna = ecchi_usa_joseph_smith
							ideology = ideology_reformer
							traits = {
								imperious
								charismatic
								basic_political_operator
							}
							on_created = {
								set_variable = {
									name = is_joseph_smith
								}				
							}
						}
					}
				}
			}
		}
		c:CSA = {
			create_diplomatic_play = {
				name = zion_secession
				target_country = c:ZIO
				type = dp_secession
			}
		}
	}
	
	option = {
		name = lds_migration.7.a
		default_option = yes
	}
	
	option = {
		trigger = { is_player = yes }
		name = lds_migration.7.b
		play_as = c:ZIO
	}
}

lds_migration.8 = { #USA response to CSA revolt
	type = country_event
	placement = root
	title = lds_migration.8.t
	desc = lds_migration.8.d
	flavor = lds_migration.8.f

	event_image = {
		video = "gfx/event_pictures/middleeast_islam.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/islam"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	duration = 3

	trigger = {
		exists = c:CSA
		exists = c:USA
		this = c:USA
		NOT = { has_global_variable = lds_csa }
		c:CSA = {
			any_scope_state = {
				state_region = {
					OR = {
						has_variable = far_west
						has_variable = nauvoo_site
					}
				}
			}
		}
	}
	
	option = { #help them
		name = lds_migration.8.a
		create_diplomatic_pact = {
			country = c:ZIO
			type = puppet
		}
		set_global_variable = {
			name = lds_csa
			value = yes
			days = 1800
		}
	}
	
	option = { #leave them to the wolves
		name = lds_migration.8.b
		set_global_variable = {
			name = lds_csa
			value = yes
			days = 1800
		}
		default_option = yes
	}
	
	option = { #kill them
		name = lds_migration.8.c
		c:USA = {
			create_diplomatic_play = {
				name = zion_secession
				target_country = c:ZIO
				type = dp_secession
			}
		}
		set_global_variable = {
			name = lds_csa
			value = yes
			days = 1800
		}
	}
}

lds_migration.9 = { #USA begins formal discrimination
	type = country_event
	placement = root
	title = lds_migration.9.t
	desc = lds_migration.9.d
	flavor = lds_migration.9.f

	event_image = {
		video = "gfx/event_pictures/middleeast_islam.bk2"
	}
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/islam"
	
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	duration = 3

	immediate = {
		if = {
			limit = {
				has_variable = lds_nauvoo
			}
			random_scope_state = {
				limit = {
					state_region = {
						has_variable = nauvoo_site
					}
				}
				state_region = {
					remove_homeland = mormon
				}
			}
		}
		else_if = {
			limit = {
				has_variable = lds_kirtland
			}
			s:STATE_OHIO = {
				remove_homeland = mormon
			}
		}
		s:STATE_MISSOURI = {
			remove_homeland = mormon
		}
	}
	
	option = {
		name = lds_migration.9.a
		hidden_effect = {
			trigger_event = { 
				id = lds_migration.6 days = 120
			}
		}
	}
}